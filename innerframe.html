<html>
    <head>
        <title>test</title>
        <!-- helper functions -->
        <script type="text/javascript" src="./gamehelpers.js"></script>
    </head>
    <body onload="registerListener()" style="background-color: #ffffff;">
        <button id="hello" onclick="sendHello()">hello</button>
        <button id="info" onclick="getInfo()">info</button>
        <button id="post" onclick="insertPost()">post</button>
        <button id="resize" onclick="toggleFrameSize()">resize</button>
        <button id="shake" onclick="shakeFrame()">shake</button>
        <button id="delete" onclick="deleteRandomBadge(false)">delete</button>
        <button id="hide" onclick="deleteRandomBadge()">hide</button>
        <button id="restore" onclick="restoreBadges()">restore</button>
        <button id="text" onclick="cycleText()">text</button>
    </body>
    <script>
        // helper functions for testing - not needed for game
        var g_frameIsExpanded = false;
        var g_currentTextIdx = 0;
        const g_numTextOptions = 3;  // g_textOptions.length in forumhelpers.js

        function getInfo() {
            alert(JSON.stringify(g_forumInfo));
        }

        function toggleFrameSize() {
            if (g_frameIsExpanded) {
                setFrameSize(150, 80);
                g_frameIsExpanded = false;
            }
            else {
                setFrameSize(150, 210);
                g_frameIsExpanded = true;
            }
        }

        async function shakeFrame() {
            shakeStart(Math.random());
            await new Promise(r => setTimeout(r, 3000));
            shakeStop();
        }

        function deleteRandomBadge(hide = true) {
            const randBadge = g_forumInfo.badges[Math.floor(Math.random() * g_forumInfo.badges.length)]
            deleteBadge(randBadge, hide);
        }

        function cycleText() {
            g_currentTextIdx = (g_currentTextIdx + 1) % g_numTextOptions;
            setPostTextIndex(g_currentTextIdx);
        }

    </script>
</html>